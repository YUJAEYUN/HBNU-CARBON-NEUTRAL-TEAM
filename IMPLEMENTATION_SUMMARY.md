# 탄소중립 이미지 분석 시스템 구현 요약

## 개요

이 시스템은 Next.js 프론트엔드와 FastAPI 백엔드를 통합하여 이미지를 분석하고, Google Vision API를 사용하여 재활용품을 분류하며, 탄소 영향을 계산하여 MongoDB에 저장하는 기능을 제공합니다.

## 주요 기능

1. **이미지 캡처 및 업로드**
   - 카메라로 이미지 촬영
   - 갤러리에서 이미지 선택

2. **이미지 분석**
   - Google Vision API를 사용한 객체 및 라벨 감지
   - 재질 분류 (플라스틱, 종이, 유리, 금속 등)
   - 복합 재질 식별

3. **재활용 정보 제공**
   - 재활용 가능 여부 판단
   - 분리배출 방법 안내
   - 재질별 처리 방법 제공

4. **탄소 영향 분석**
   - 재질별 탄소 발자국 계산
   - 재활용 시 탄소 절감 효과 계산
   - 탄소중립 실천 팁 제공

5. **사용자별 이미지 관리**
   - 사용자 ID 기반 이미지 저장
   - 분석 히스토리 조회
   - 카테고리별 이미지 분류

## 기술 스택

### 백엔드 (FastAPI)
- **FastAPI**: 고성능 API 서버
- **Google Vision API**: 이미지 분석
- **MongoDB**: 이미지 및 분석 결과 저장
- **GridFS**: 이미지 바이너리 데이터 저장
- **Python**: 재활용 분류 및 탄소 영향 계산 로직

### 프론트엔드 (Next.js)
- **Next.js**: React 기반 프레임워크
- **TypeScript**: 타입 안전성
- **Tailwind CSS**: UI 스타일링
- **Context API**: 사용자 인증 상태 관리

## 구현 내용

### 1. 백엔드 구현

#### 1.1 MongoDB 스키마 업데이트
- 이미지 컬렉션에 user_id, category, date, time 필드 추가
- 사용자 ID 및 카테고리 인덱스 생성

#### 1.2 재활용 분류 로직
- 재질별 키워드 데이터베이스 구축
- 복합 재질 처리 규칙 정의
- 재활용 권장사항 생성 로직

#### 1.3 탄소 영향 계산 로직
- 재질별 탄소 발자국 데이터베이스 구축
- 재활용 시 탄소 절감 효과 계산
- 탄소 영향 수준 평가

#### 1.4 API 엔드포인트
- `/analyze-and-save/`: 이미지 분석 및 저장
- `/images/user/{user_id}`: 사용자별 이미지 조회
- `/images/category/{category}`: 카테고리별 이미지 조회
- `/images/{image_id}`: 이미지 상세 정보 조회

### 2. 프론트엔드 구현

#### 2.1 카메라 컴포넌트
- 카메라 접근 및 이미지 캡처
- 이미지 미리보기 및 재촬영
- 백엔드로 이미지 전송

#### 2.2 분석 결과 컴포넌트
- 재활용 정보 표시
- 탄소 영향 정보 표시
- 탭 기반 상세 정보 제공

#### 2.3 히스토리 페이지
- 사용자별 분석 이미지 목록
- 이미지 상세 정보 조회
- 필터링 및 정렬 기능

## 데이터 흐름

1. 사용자가 이미지 촬영 또는 업로드
2. 이미지와 사용자 ID가 백엔드로 전송
3. 백엔드에서 Google Vision API로 이미지 분석
4. 재질 분류 및 탄소 영향 계산
5. 결과를 MongoDB에 저장
6. 분석 결과를 프론트엔드로 반환
7. 프론트엔드에서 결과 표시

## 설치 및 실행 방법

### 백엔드 설정
```bash
# 환경 설정
pip install -r requirements.txt
# Google Vision API 인증 설정
export GOOGLE_APPLICATION_CREDENTIALS="path/to/credentials.json"
# MongoDB 연결 설정
export MONGO_URL="mongodb://localhost:27017"
export MONGO_DB_NAME="recycling_db"
# 서버 실행
python run.py
```

### 프론트엔드 설정
```bash
# 환경 설정
npm install
# 백엔드 API URL 설정
echo "NEXT_PUBLIC_API_URL=http://localhost:8000" > .env.local
# 개발 서버 실행
npm run dev
```

## 향후 개선 사항

1. **정확도 향상**
   - 더 많은 재질 및 키워드 추가
   - 머신러닝 모델 학습을 통한 분류 정확도 개선

2. **사용자 경험 개선**
   - 실시간 피드백 제공
   - 인터랙티브 튜토리얼 추가

3. **기능 확장**
   - 바코드 스캔을 통한 제품 정보 조회
   - 위치 기반 분리수거 시설 안내

4. **데이터 분석**
   - 사용자별 재활용 통계 제공
   - 탄소 절감 효과 시각화
